import { HttpClient } from '@angular/common/http';
import { Component, OnInit } from '@angular/core';
import { Administrador } from 'src/app/models/administrador';
import { AdministradorService } from 'src/app/services/administradorService';
import { SessionService } from 'src/app/services/sessionService';
import { AdministradoresPage } from '../administradores.page';
import { Camera, CameraOptions } from '@ionic-native/camera/ngx';

@Component({
  selector: 'app-adm-form',
  templateUrl: './adm-form.component.html',
  styleUrls: ['./adm-form.component.scss'],
})
export class AdmFormComponent implements OnInit {

  constructor(private http:HttpClient) { }

  ngOnInit() {
    if(AdmFormComponent.adm){
      this.administrador = AdmFormComponent.adm
    }
  }

  static adm:Administrador
  imagem:string = ""
  private camera: Camera = new Camera();

  chamarCamera(){

    this.imagem = "data:image/jpeg;base64,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rzyN5t3Tycf1NXnkbzbunk4/qavPI3m3dPJx/U1eeRvNu6eTj+pq88jebd08nH9TV55Cz+M+1oqfUf5xgTgj5tYxlebyk3i1IZSiHIuF5k4nCzUhmx4YAt0InububRjmsvTHg1aSx/7BxNxK4e1rLWnGJeV1yrqeCSm+mdFObSZJpDOBqH84EBEKJEsCaSA8u0ka01U+AbXDoIGXIJBkc4IdzeFVnCTwAZn4Xm0hALHGa+OecZEcVmQiNy686nH1+tJ8xIrPUnoJhmbT2iaImRmjxwIQ4OsVPHS9CQA/Z2gAAAoHoYZyKybnvFyqy+eE7qy+OB88Um3vf0SkwplgZQ6RsMolroDd3YnrpBu7kPkLDOKxCX2J6EJqATYQO8Qd1xnaYFolLuf5Id64CBoImeghGVQ2j+IripXa2mGmdrCUwJ7ehLIq5uagCVFajaQFoKhBQyroivocqCf5V0hioMGDcs0+VDme6nxQTUMCLyJ/lTT0ToAZSJ20MR8xM2hqHiOgplf1T//aAAwDAQACAAMAAAAQ88888888888888888889888888888888888888898888888888888888888988888888888888888889888888+w+88+z888888988888808/wDPOfPvPPPPPfPPPPPHPFfPKfPPPPPPPfPPPPPPPFfPKfPPPPPPPfPPPPPNPFfPLfPPPPPPPfPPPPPDvEfPPvH/ADzzzz3zzzzzzvbxP779/wA888898888888t+888t888888988888888emvN8888888988888888i9JQ8888888988888888ydt488888889888888888R9888888889888888888888888888898888888888888888888988888888888888888889wwwwwwwwwwwwwwwwwwwz/8QAIBEBAAICAgMBAQEAAAAAAAAAAQARIDEQMCFAQYFRYf/aAAgBAwEBPxD0zfqG/UN+ob6EC8QhYTWRvMm784JK5Ib4AKfcjeezO9WRvPZnerI3nszvVkbzqrwtOaq4KyZG81IQiCAKY1+ca/KGYALZfZDfQjp1DbXIC2f5jM30u2oRfj9hF+PyM2ug30jc+T5iT+Ywan3oN9JWwjjEMIXjoG+l3ZBfCC0I9zoN+ob9Q36huUymUymUymUymUymUymUymUymUymUwJ//8QAKREAAQMCBAYCAwEAAAAAAAAAAQARMRBhIDBBcSFAUaHR8LHhgZHB8f/aAAgBAgEBPxDk4OUg5SDlIMYBJYJyjbb04XuW90lEJjOKDGWjdjjdxQUCwLH91Bo4Dn9RQGbM47u2KDH6FxSfYV7Q09q+KDH6FxSfYV7Q09q+KDH7FxSfYV7Q09K+KDGAx6n8NBgghjuKmTA35P1QQ3/QvigxyHkjEOCiAbknQ8HofIRbggWlDoGBGyYDiVqvHtpigyJYFp0uEFhEVMQgB1RSgDv9Y4Ml/wCKyC2DqDfHhG7R1B+x8J5Mr5EGSbAcfPRO5gPqUEZgPqPpDhYfMZEGSEXJYj8O6HJq4PUIfGvE9AiCKQ58ZEGSQlgQ1xmzjyEdcdsw8lEZXLIg5SDlIOUgVhWFYVhWFYVhWFYVhWFYVhWFYVhWFYVhEccF/8QAKRABAAECBAQHAQEBAAAAAAAAAREAITFBUWFAcZHwECAwUIGhscGA0f/aAAgBAQABPxD/ADqU74MBqrThYMR15Kv0ppPwEjpBjrHoo7mAkOkrdJo/MWIxc8R0oORXQGzxYl4xDiEg7BFtXwSSKS2sKVVpcn6fOlaQVCGyGkrHIaCPBQ7PNgZInMIfjinCksrnPo8WhjZn85dt/wBfFwp2PFOFd00PVSZdk14rJrumh6qTLsmvFZNd00PVSZdk14rJrumh6qTLsmvFZNd00PVSZdk14pwrumh6qTLsmvFODREIgPJD4qqELObADznAHkRV/CeIlYJ5Ev8AOLYcg0u7D9J4x7EXca+SZg8TcfKc9t9djdwrETyNGR8EHik0mZfA/Xi7L9oLsYPS/wAeRTcJOg3mg161FGM9a/6JPEECwXfYGK8qKSNYw74MvI8Y3NiWOpl6cWCAKIRwSl9nYdgze5+R5GxhKUTklFiUgPvEml8O9rrFKGrF6+/IZbYDKx+XAoiZhsAIDjHHfQDHd6gXJcfnH8y9F6RwGWquQZtPQQovR2YBxwIcYLawyaCsG1g7WHMtRfDzArS2qcjVsU6aQhXv4bHsLDMck11cD0pHIQrqElPwblP6lRKG8x+0iOYhP1QfdXIhTALy26zQYGgEAbHsctHxZPo5nY60ocuifuVBXNgv2FYEiKR9DI7PX2QKTOndsC5KXdudYUBRYGauQa1fBS4Yfp0KjjEsVX2HRrPQKuDUcE3pIa0uuGKc0Lm0mXsWIduQEtMWUq7tuhFEqiPLi+gL83xCDJi3gvyE+wp/g1Gz/wAtTbyPlJJ7DdPAc10EQjRHxSDCqjl8UEBZOk6/ihngc0Q+wuFydqWiE8siSOWHxSvlZ8AsycmcOceKpEhsgOBzVx0wp4DGnML+fNABAQZHsRCYKhbfcfWNZcuDE1HM3KYFsAAG1yUTNYEFNHFWFqE8N1yN2nARiGG20+2/smgwSR5HE+KTCHIpyhNFhxkV6Jqe44lzmcX5/wAp/wD/2Q==";
    
    return;

    const options: CameraOptions = {
      quality: 80,
      destinationType: this.camera.DestinationType.DATA_URL,
      encodingType: this.camera.EncodingType.JPEG,
      mediaType: this.camera.MediaType.PICTURE
    }
    
    this.camera.getPicture(options).then((imageData) => {
     // imageData is either a base64 encoded string or a file URI
     // If it's base64 (DATA_URL):
     let base64Image = 'data:image/jpeg;base64,' + imageData;

     this.imagem = base64Image

    }, (err) => {
     // Handle error
    });
  }


  emptyAdm:Administrador = { id: 0, nome: null, telefone: null, email: null, senha: null, token: null, imagem: null }
  administrador:Administrador = this.emptyAdm

  salvar(){
    let admLogado:Administrador = SessionService.get("admLogado")
    this.administrador.imagem = this.imagem;
    new AdministradorService(this.http).salvar(admLogado.token, this.administrador)
    this.administrador = this.emptyAdm
    alert('Salvo no banco de dados')
    AdministradoresPage.getInstance().form = false;
    AdministradoresPage.getInstance().carregaAdministradores();
  }

  cancelar(){
    this.administrador = this.emptyAdm
    AdministradoresPage.getInstance().form = false;
  }

}
